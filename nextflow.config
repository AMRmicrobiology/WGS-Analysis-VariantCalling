/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    nf/WGS-BACTERIAN VARIANT CALLING config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Default config options for all compute environments
----------------------------------------------------------------------------------------
    Author: Jimmy Lucas
    Description: Configuration for WGS Analysis Workflow
    Repository: https://github.com/jimmlucas
    Nextflow Version: >=23.04.4.5881
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/


params {
    help                    = false
    input                   = "$projectDir/data/in/*_{1,2}.fastq.gz"
    reference               = "$projectDir/data/reference_genome"
    personal_ref            = "$projectDir/data/reference_genome/personal/*.{fasta,fna}"
    outdir                  = "$projectDir/data/out"
    qcdir                   = "$projectDir/data/out/1-fastqc"
    index_genome_personal   = "$projectDir/data/reference_genome/personal/index_personal_genome"
    gatk4.docker            = "broadinstitute/gatk:4.5.0.0"
    bakta.docker            = "oschwengers/bakta:latest"
    amrfinderplus.docker    = "quay.io/biocontainers/ncbi-amrfinderplus:3.12.8--h283d18e_0"
    singleEnd               = false
    version                 = '0.1.0'
    nf_required_version     = '0.26.0'

// Max resource options, defaults only, expecting to be overwritten
    gatk_memory     = 10        // should be same as max_memory  
    max_threads     = 16
}

profiles {

    hpc {
        process.executor = 'slurm'
        singularity.enabled = true
        singularity.autoMounts = true
        process.queue = ''
        process.cpus = 4
        process.memory = '64 GB'
        process.time = '6H'
        clusterOptions = 
        workDir = '/scratch/$USER/work'
        params.outdir = '/scratch/$USER/data/out'

    }
    conda {
        params.enable_conda    = true
        conda.enabled          = true
        docker.enabled         = false
        singularity.enabled    = false
        podman.enabled         = false
        shifter.enabled        = false
        charliecloud.enabled   = false
    }
    docker {
        process {
            executor = 'local'
            cpus = 24
            memory = '200 GB'
            container = 'jimmlucas/dvt:wgs'
            workDir = '/scratch/jlucas/work'
            maxForks = 4
        }
        docker.enabled         = true
        singularity.enabled    = false
        podman.enabled         = false
        shifter.enabled        = false
        charliecloud.enabled   = false
    }
}

report {
    enabled = true
    file = "${params.outdir}/report/DVT_report.html"
    overwrite = true
}
timeline {
    enabled = true
    file = "${params.outdir}/report/DVT_timeline.html"
    overwrite = true
}
trace {
    enabled = true
    file = "${params.outdir}/report/DVT_trace.txt"
    overwrite = true
}
dag {
    enabled = true
    file = "${params.outdir}/report/DVT_dag.svg"
    overwrite = true
}